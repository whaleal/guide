

# 常见问题与解答

- ## WAP平台支持哪些操作系统？

      本平台现阶段仅支持 centos 6，centos 7，centos 8，其余操作系统待开发。


- ## WAP平台支持哪些数据库？

      现阶段仅支持mongoDB，其余数据库待开发。

- ## 我可以重置密码吗？

      普通用户不可以，可以找管理员重置密码。

- ## 如何添加新主机？

  - 添加新主机详情参考 
  [AddEC2](../02-Usage/Server/EC2.md),[Add K8S](../02-Usage/Server/K8S.md)


- ## 如何创建集群？

  - 创建集群详情参考以下链接
  
    - 创建单节点[CreateStandalone](../02-Usage/MongoDB/CreateDeployment/CreateStandalone.md)
    - 创建复制集[CreateReplicaSet](../02-Usage/MongoDB/CreateDeployment/CreateReplicaSet.md)
    - 创建分片[CreateShardedCluster](../02-Usage/MongoDB/CreateDeployment/CreateShardedCluster.md)
    - 纳管群集[ExistingMongoDBDeployment](../02-Usage/MongoDB/CreateDeployment/ExistingMongoDBDeployment.md)

- ## 告警条件意味着什么？

      告警条件是根据自身需求设置CPU、内存、交换、磁盘、带宽等阈值，当阈值被触发时会将异常情况发送给管理员用户。

- ## 配置了告警信息，如何接受告警？

      当配置告警条件后告警被触发，告警信息会通过邮件、钉钉、短信等方式进行通知。

- ## 配置了告警信息与接受当时，没有收到告警。
  
      在用户页面有配置是否接收告警通知选项，打开即可。


- ## mongo之间支持同步吗？

      暂不支持，待开发。

- ## 支持哪些MongoDB认证方式？

      1.未开启任何认证
      2.账号和密码
      3.账号和密码且CA证书

- ## 脱离纳管后节点时被关闭了吗？

       当集群被脱离纳管后只是在本平台不进行管理与显示，其在主机上并没有被关闭。删除节点操作是将节点进行关闭。

- ## 添加shard失败怎么办

      手动查看mongo日志，根据日志报错查找原因。

* ## 根据系统用户的权限对集群做一些监控类的操作，不做update的操作
   ```
   当前不支持通过低权限用户使WAP平台对Mongodb只进行查看的权限，但是我们可以使用WAP的用户管理去给使用平台的用户只分配读的权限。
   ```

* ## 告警是否能够先写到某个地方，自己去拉取信息?
   ```
   支持将告警写到appdb，通过第三方工具去数据库中读取告警信息。
   ```

* ## 支持麒麟系统吗
  ```
  首先需要客户将当前使用到的麒麟系统的版本信息内核信息提供给锦木，然后我们进过针对性的测试才能给答复。
  ```

* ## 平台横向扩展的原理

  ```
  横向扩展 就是普通的高可用，搭建多个wap服务 共用一个appdb
  纳管的agent可以hash分配给不同的wap，减小单个wap压力
  当某个wap服务挂掉后，其它wap不受影响。受影响的agent会重新hash分配到健康的wap上
  ```

* ## 负载管理指的是什么?
  ```
  appdb的负载管理
  ```

* ## wap扩展节点的同时，对外提供服务的接口是一个还是多个？

  ```
  一个或者多个都可以，取决于配置，wap的所有节点使用的都是一个appdb
  ```

* ## 压力测试同时能支持多少? 

  ```
  EC2下部署4c 8GB wap服务(除MongoDB和nacos服务+数据量)，支持200个主机的并发创建支持/400个MongoDB节点的并发创建
  ```

* ## oplog会存多久?

  ```
  取决于用户配置的恢复天数，最多保留半年 最少一天
  ```

* ## 主机对应哪几个mongodb，能不能放一个页面上?

  ```
  后期可以在server中进行添加
  ```

* ## 每纳管一个节点，就对用户添加一个读的权限?

  ```
  用户的权限应该和每个集群一对一的进行管理，需要在添加节点的时候对用户赋予读的权限。
  ```

* ## Home页面能不能根据集群名搜索显示?
  ```
  首页相当于一个大屏，不能去选择集群进行显示，只能在MongoDB页面去针对具体的集群查看其监控信息。
  ```

* ## 如果cpu高了，能看出来那个查询导致的cpu高吗？

  ```
  不支持该功能，导致CPU过高往往是多方面的因素导致的，平台不能给出直接导致cpu高的sql
  ```

* ## 数据过大，当前有两百多个节点（客户画像、用户足迹、汽车直客）一个节点可能1T+ 备份速度会有影响吗?

  ```
  如果只有一台备份(DDT)服务器，全量备份只支持同时一个集群全量备份，全量备份完成后增量备份支持多个集群同时进行，具体还需根据备份(DDT)服务器的资源进行评估，
  如果落盘数据大于1T,全量备份可能会中断，官方mongodb管理工具opsmanager也不能对这样大的数据进行全量备份，opsmanager默认两天会中断没有结束的全量备份任务。
  ```

  